---
# Operations to do one master
- hosts: localhost
  gather_facts: no
  roles:
    - prepare_master
    - role: provide_instances
      when: provides is defined
  post_tasks:
    - meta: refresh_inventory

# Operations to do on all targets
- hosts: all
  become: yes
  become_method: sudo
  roles:
    - prepare_target
    - install_docker

# Specific operations for targets

#- hosts: data
#  become: yes
#  become_method: sudo
#  roles:

- hosts: application
  become: yes
  become_method: sudo
  roles:
    - install_jekyll

#- hosts: frontend
#  become: yes
#  become_method: sudo
#  roles:
...